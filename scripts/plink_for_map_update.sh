#! bin/bash



cd ../data/raw/

wildNA_220k_filtered
LD_files/Labrador_220k_filtered
LD_files/Newfoundland_220k_filtered
LD_files/STLawrence_220k_filtered

#make the ped files from the existing bed files
plink --bfile wildNA_220k_filtered --recode --tab --chr-set 30 no-xy --out LD_files/old_wildNA_220k_filtered
plink --bfile LD_files/Labrador_220k_filtered --recode --tab --chr-set 30 no-xy --out LD_files/old_Labrador_220k_filtered
plink --bfile LD_files/Newfoundland_220k_filtered --recode --tab --chr-set 30 no-xy --out LD_files/old_Newfoundland_220k_filtered
plink --bfile LD_files/STLawrence_220k_filtered --recode --tab --chr-set 30 no-xy --out LD_files/old_STLawrence_220k_filtered


#and do the no LD filter too

plink --bfile LD_files/noLDfilter_220k_filtered --recode --tab --chr-set 30 no-xy --out LD_files/old_noLDfilter_220k_filtered
plink --bfile LD_files/noLDfilter_Labrador_220k_filtered --recode --tab --chr-set 30 no-xy --out LD_files/old_noLDfilter_Labrador_220k_filtered
plink --bfile LD_files/noLDfilter_Newfoundland_220k_filtered --recode --tab --chr-set 30 no-xy --out LD_files/old_noLDfilter_Newfoundland_220k_filtered
plink --bfile LD_files/noLDfilter_STLawrence_220k_filtered --recode --tab --chr-set 30 no-xy --out LD_files/old_noLDfilter_STLawrence_220k_filtered


#update the map files
python update_map_files.py


# re-pair the PED and MAP, then convert to BED once more.
cd LD_files

mv old_wildNA_220k_filtered.ped new_wildNA_220k_filtered.ped
mv old_Labrador_220k_filtered.ped new_Labrador_220k_filtered.ped
mv old_Newfoundland_220k_filtered.ped new_Newfoundland_220k_filtered.ped
mv old_STLawrence_220k_filtered.ped new_STLawrence_220k_filtered.ped

mv old_noLDfilter_220k_filtered.ped new_noLDfilter_220k_filtered.ped
mv old_noLDfilter_Labrador_220k_filtered.ped new_noLDfilter_Labrador_220k_filtered.ped
mv old_noLDfilter_Newfoundland_220k_filtered.ped new_noLDfilter_Newfoundland_220k_filtered.ped
mv old_noLDfilter_STLawrence_220k_filtered.ped new_noLDfilter_STLawrence_220k_filtered.ped

mv v3_updated_old_wildNA_220k_filtered.map new_wildNA_220k_filtered.map
mv v3_updated_old_Labrador_220k_filtered.map new_Labrador_220k_filtered.map
mv v3_updated_old_Newfoundland_220k_filtered.map new_Newfoundland_220k_filtered.map
mv v3_updated_old_STLawrence_220k_filtered.map new_STLawrence_220k_filtered.map

mv v3_updated_old_noLDfilter_220k_filtered.map new_noLDfilter_220k_filtered.map
mv v3_updated_old_noLDfilter_Labrador_220k_filtered.map new_noLDfilter_Labrador_220k_filtered.map
mv v3_updated_old_noLDfilter_Newfoundland_220k_filtered.map new_noLDfilter_Newfoundland_220k_filtered.map
mv v3_updated_old_noLDfilter_STLawrence_220k_filtered.map new_noLDfilter_STLawrence_220k_filtered.map
# back to BED

plink --file new_wildNA_220k_filtered --make-bed --out new_wildNA_220k_filtered



